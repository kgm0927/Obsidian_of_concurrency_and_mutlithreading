

C언어를 통해 레지스터를 다루는 방법과 volatile 수식자는 설명하지만 C언의 기본 문법은 설명하지 않는다. 

현재 주류 OS는 C 언어로 구현되어 있으며, 멀티스레드용 라이브러리인 Pthread 역시 C언어의 API를 기본으로 하고 있으며, 동시성 프로그래밍의 원리를 아는 의미에서 C 언어를 채택했다.





### 2.2.1 Pthreads

이 절에서는 Pthreads의 기본 사항을 설명한다. 많은 프로그래밍 언어에서 스레드를 다루는 기능을 기본 라이브러리로 제공하지만 C 언어에서는 외부 라이브러리를 이용해야 한다. Pthreads는 POSIX 표준 인터페이스를 갖춘 스레드 라이브러리를 총칭한다. 리눅스나 BSD 등 유닉스 계열을 OS에서 이용 윈도우용도 존재한다.

```
```


#### 디태치 스레드


앞의 예에서는 스레드 종료를 pthread_join 함수에서 기다렸다. pthread_join 함수로 종료 처리를 수행하지 않으면 메모리 누출이 되므로 반드시 join를 해야 한다. 한편 스레드 종료 시 자동으로 스레드용 리소스를 해제하는 방법도 있으며, 그런 스레드를 **디태치 스레드**(detach thread)라 부른다. 스레드를 디태치 스레드로 만드는 방법은 2가지다.

첫 번째는 pthread_create  함수 호출 시 어트리뷰트(두 번째 인수)로 지정하는 방법, 두 번째는 pthread_detach 함수를 호출하는 방법이다.


```


```


### 2.2.2 volatile 수식자

이 절에는 volatile 수식자를 설명한다. volatile 수식자를 이용하면 컴파일러의 최적화를 억제한 메모리 접근을 구현할 수 있다. 메모리 접근은 레지스터 접근에 비해 속도가 느리므로 컴파일러는 메모리 접근을 억제하기 위해 일단 레지스터에 복사해서 값을 이용한다. 하지만 메모리상의 값을 감시하거나 할 때 이 최적화는 장애가 되기도 하며, 이 때는 volatile 수식자를 사용한다.